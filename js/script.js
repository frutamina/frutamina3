const html=document.documentElement,toggleThemeBtn=document.getElementById("toggleTheme"),savedTheme=localStorage.getItem("theme");"dark"===savedTheme?(html.setAttribute("data-theme","dark"),toggleThemeBtn.classList.remove("bi-sun"),toggleThemeBtn.classList.add("bi-moon")):(html.removeAttribute("data-theme"),toggleThemeBtn.classList.remove("bi-moon"),toggleThemeBtn.classList.add("bi-sun")),toggleThemeBtn&&toggleThemeBtn.addEventListener("click",function(){"dark"===html.getAttribute("data-theme")?(html.removeAttribute("data-theme"),toggleThemeBtn.classList.remove("bi-moon"),toggleThemeBtn.classList.add("bi-sun"),localStorage.setItem("theme","light")):(html.setAttribute("data-theme","dark"),toggleThemeBtn.classList.remove("bi-sun"),toggleThemeBtn.classList.add("bi-moon"),localStorage.setItem("theme","dark"))}),document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelectorAll("section[id]"),t=document.querySelectorAll('a.menu-link[href^="#"]'),n=document.getElementById("header");function r(){let r=(n?n.offsetHeight:100)+10,o=window.scrollY+r;e.forEach(e=>{let n=e.offsetTop,r=e.offsetHeight,l=e.getAttribute("id");if(o>=n&&o<n+r){t.forEach(e=>e.classList.remove("active"));let a=document.querySelector(`a.menu-link[href="#${l}"]`);a&&a.classList.add("active")}})}window.addEventListener("scroll",r),r()});const menuHamburger=document.getElementById("menuHamburger"),menuMobile=document.getElementById("menuMobile");menuHamburger&&menuMobile&&(menuHamburger.addEventListener("click",function(e){e.stopPropagation(),menuMobile.classList.toggle("active")}),document.addEventListener("click",function(e){menuMobile.classList.contains("active")&&!menuMobile.contains(e.target)&&e.target!==menuHamburger&&menuMobile.classList.remove("active")}),menuMobile.querySelectorAll(".menu-link").forEach(e=>{e.addEventListener("click",()=>menuMobile.classList.remove("active"))}));const form=document.getElementById("formContato"),emailInput=document.getElementById("email"),telInput=document.getElementById("telefone"),emailError=document.getElementById("emailError"),telError=document.getElementById("telError"),emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,telRegex=/^\(\d{2}\)\s\d{4,5}-\d{4}$/;function filtrarProdutos(){let e=document.getElementById("pesquisaProduto").value.toLowerCase(),t=document.querySelectorAll(".produto-card"),n=document.getElementById("mensagemNaoEncontrado"),r=document.getElementById("botaoContatoNaoEncontrado"),o=!1;t.forEach(t=>{t.querySelector(".produto-titulo").innerText.toLowerCase().includes(e)?(t.style.display="flex",o=!0):t.style.display="none"}),o||""===e.trim()?(n.style.display="none",r.style.display="none"):(n.style.display="flex",r.style.display="flex")}function atualizarProgresso(){let e=produtosData[categoriaAtual],t=document.getElementById("progressoTexto"),n=document.querySelector(".modal-progress-bar");if(t&&(t.textContent=`${indiceAtual+1}/${e.length}`),n){let r=(indiceAtual+1)/e.length*100;n.style.width=r+"%"}}form.addEventListener("submit",function(e){let t=!0;emailRegex.test(emailInput.value.trim())?(emailInput.classList.remove("error"),emailError.style.display="none"):(emailInput.classList.add("error"),emailError.style.display="block",emailError.textContent="Digite um e-mail v\xe1lido (ex: usuario@dominio.com)",t=!1),telRegex.test(telInput.value.trim())?(telInput.classList.remove("error"),telError.style.display="none"):(telInput.classList.add("error"),telError.style.display="block",telError.textContent="Digite um telefone v\xe1lido (ex: (11) 91234-5678)",t=!1),t||e.preventDefault()}),telInput.addEventListener("input",function(e){let t=e.target.value.replace(/\D/g,"");t.length>11&&(t=t.slice(0,11)),t=t.length<=10?t.replace(/^(\d{2})(\d{4})(\d{0,4})$/,"($1) $2-$3"):t.replace(/^(\d{2})(\d{5})(\d{0,4})$/,"($1) $2-$3"),e.target.value=t}),function(){let e=document.getElementById("formContato");if(!e)return;let t=document.getElementById("formAlert"),n=document.getElementById("btnEnviar"),r=n?n.querySelector(".btn-texto"):null;function o(e,n){t&&(t.className="form-alert "+e,t.textContent=n)}e.addEventListener("submit",async t=>{if(t.preventDefault(),!e.checkValidity()){o("error","Por favor, preencha os campos obrigat\xf3rios.");return}n&&(n.disabled=!0,r&&(r.textContent="Enviando..."));try{let l=e.getAttribute("action"),a=Object.fromEntries(new FormData(e)),i=await fetch(l,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});i.ok?(o("success","Mensagem enviada com sucesso! Em breve entraremos em contato."),e.reset()):(o("error","N\xe3o foi poss\xedvel enviar agora. Tente novamente em instantes."),console.error("Formspree error",await i.text()))}catch(s){o("error","Falha de conex\xe3o. Verifique sua internet e tente novamente."),console.error(s)}finally{n&&(n.disabled=!1,r&&(r.textContent="Enviar Mensagem"))}})}();